{"version":3,"sources":["meteor://ðŸ’»app/client/template/components/accountInfo.js","meteor://ðŸ’»app/client/template/components/sendEther.js","meteor://ðŸ’»app/client/lib/modules/defaultSession.js","meteor://ðŸ’»app/client/lib/init.js","meteor://ðŸ’»app/client/lib/route.js","meteor://ðŸ’»app/client/main.js"],"names":["Template","accountBalanceComponent","helpers","accounts","EthAccounts","find","accountBalanceItem","name","address","balance","balanceEth","web3","fromWei","parseFloat","toFixed","estimatedFeeInWei","gas","Session","get","gasPrice","BigNumber","mul","estimationCallback","e","res","template","console","log","set","getGasPriceCallback","toString","sendEtherComponent","events","preventDefault","fundInfo","fAddr","$","target","val","tAddr","amount","toWei","findOne","reactive","eth","estimateGas","from","to","value","bind","getGasPrice","modal","sendConfirmModalTemplate","sendAmountInEther","amountEth","fee","sendTransaction","error","txHash","alert","defaultSessionVars","initialFundInfo","ammount","setDefault","Web3","currentProvider","providers","HttpProvider","init","Router","configure","layoutTemplate","route","redirect","module","watch","require","v","ReactiveVar","walletLayout","activeIfCurrent","currentRoute","current","getName"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAAA,SAASC,uBAAT,CAAiCC,OAAjC,CAAyC;AACvCC,YAAU,YAAU;AAClB,WAAOC,YAAYC,IAAZ,CAAiB,EAAjB,CAAP;AACD;AAHsC,CAAzC;AAMAL,SAASM,kBAAT,CAA4BJ,OAA5B,CAAoC;AAClCK,QAAM,YAAU;AACd,WAAO,KAAKA,IAAZ;AACD,GAHiC;AAIlCC,WAAS,YAAU;AACjB,WAAO,KAAKA,OAAZ;AACD,GANiC;AAOlCC,WAAS,YAAU;AACjB,QAAIC,aAAaC,KAAKC,OAAL,CAAa,KAAKH,OAAlB,EAA2B,OAA3B,CAAjB;AACA,WAAOI,WAAWH,UAAX,EAAuBI,OAAvB,CAA+B,CAA/B,CAAP;AACD;AAViC,CAApC,uH;;;;;;;;;;;ACNA,IAAIC,oBAAqB,YAAU;AACjC,MAAIC,MAAMC,QAAQC,GAAR,CAAY,wBAAZ,CAAV;AACA,MAAIC,WAAW,IAAIC,SAAJ,CAAcH,QAAQC,GAAR,CAAY,2BAAZ,CAAd,CAAf;AACA,SAAOC,SAASE,GAAT,CAAaL,GAAb,CAAP;AACD,CAJD;;AAMA,IAAIM,qBAAqB,UAASC,CAAT,EAAYC,GAAZ,EAAgB;AACrC,MAAIC,WAAW,IAAf;AACAC,UAAQC,GAAR,CAAY,iBAAZ,EAA+BH,GAA/B,EAAoCD,CAApC;;AACA,MAAG,CAACA,CAAD,IAAMC,GAAT,EAAc;AACVP,YAAQW,GAAR,CAAY,wBAAZ,EAAsCJ,GAAtC;AACH;AACJ,CAND;;AAQA,IAAIK,sBAAsB,UAASN,CAAT,EAAYC,GAAZ,EAAgB;AACtC,MAAIC,WAAW,IAAf;AACAC,UAAQC,GAAR,CAAY,4BAAZ,EAA0CH,IAAIM,QAAJ,CAAa,EAAb,CAA1C,EAA4DP,CAA5D;;AACA,MAAG,CAACA,CAAD,IAAMC,GAAT,EAAc;AACVP,YAAQW,GAAR,CAAY,2BAAZ,EAAyCJ,IAAIM,QAAJ,CAAa,EAAb,CAAzC;AACH;AACJ,CAND;;AAQA9B,SAAS+B,kBAAT,CAA4BC,MAA5B,CAAmC;AACjC,iBAAe,UAAST,CAAT,EAAY;AACzB,QAAIE,WAAW,IAAf;AACAF,MAAEU,cAAF;AACA,QAAIC,WAAW;AACbC,aAAOC,EAAEb,EAAEc,MAAJ,EAAYhC,IAAZ,CAAiB,eAAjB,EAAkCiC,GAAlC,EADM;AAEbC,aAAOH,EAAEb,EAAEc,MAAJ,EAAYhC,IAAZ,CAAiB,eAAjB,EAAkCiC,GAAlC,EAFM;AAGbE,cAAQ7B,KAAK8B,KAAL,CAAWL,EAAEb,EAAEc,MAAJ,EAAYhC,IAAZ,CAAiB,eAAjB,EAAkCiC,GAAlC,EAAX,EAAmD,OAAnD;AAHK,KAAf;;AAMA,QAAGlC,YAAYsC,OAAZ,CAAoB;AAAClC,eAAS0B,SAASC;AAAnB,KAApB,EAA+C;AAACQ,gBAAU;AAAX,KAA/C,CAAH,EAAsE;AACpE1B,cAAQW,GAAR,CAAY,oBAAZ,EAAkCM,QAAlC;AACAvB,WAAKiC,GAAL,CAASC,WAAT,CAAqB;AAACC,cAAMZ,SAASC,KAAhB;AAAuBY,YAAIb,SAASK,KAApC;AAA2CS,eAAOd,SAASM;AAA3D,OAArB,EAAyFlB,mBAAmB2B,IAAnB,CAAwBxB,QAAxB,CAAzF;AACAd,WAAKiC,GAAL,CAASM,WAAT,CAAqBrB,oBAAoBoB,IAApB,CAAyBxB,QAAzB,CAArB;AACAW,QAAE,mBAAF,EAAuBe,KAAvB,CAA6B,MAA7B;AACD;AACF;AAhBgC,CAAnC;AAmBAnD,SAASoD,wBAAT,CAAkClD,OAAlC,CAA0C;AACxCmD,qBAAmB,YAAU;AAC3B,QAAIC,YAAY3C,KAAKC,OAAL,CAAaK,QAAQC,GAAR,CAAY,oBAAZ,EAAkCsB,MAA/C,EAAsD,OAAtD,CAAhB;AACA,WAAO3B,WAAWyC,SAAX,EAAsBxC,OAAtB,CAA8B,CAA9B,CAAP;AACD,GAJuC;AAKxCqB,SAAO,YAAU;AACf,WAAOlB,QAAQC,GAAR,CAAY,oBAAZ,EAAkCiB,KAAzC;AACD,GAPuC;AAQxCI,SAAO,YAAU;AACf,WAAOtB,QAAQC,GAAR,CAAY,oBAAZ,EAAkCqB,KAAzC;AACD,GAVuC;AAWxCgB,OAAK,YAAU;AACb,WAAO5C,KAAKC,OAAL,CAAaG,mBAAb,EAAiC,OAAjC,EAA0Ce,QAA1C,CAAmD,EAAnD,CAAP;AACD;AAbuC,CAA1C;AAgBA9B,SAASoD,wBAAT,CAAkCpB,MAAlC,CAAyC;AACvC,iBAAe,UAAST,CAAT,EAAY;AACzBA,MAAEU,cAAF;AACA,QAAIC,WAAWjB,QAAQC,GAAR,CAAY,oBAAZ,CAAf;AACAP,SAAKiC,GAAL,CAASY,eAAT,CAAyB;AACvBV,YAAMZ,SAASC,KADQ;AAEvBY,UAAIb,SAASK,KAFU;AAGvBS,aAAOd,SAASM;AAHO,KAAzB,EAIG,UAASiB,KAAT,EAAgBC,MAAhB,EAAuB;AACxBhC,cAAQC,GAAR,CAAY,mBAAZ,EAAiC+B,MAAjC,EAAyCD,KAAzC;;AACA,UAAG,CAACA,KAAJ,EAAW;AACTE,cAAM,0BAAN;AACD,OAFD,MAEO;AACLA,cAAM,uBAAN;AACD;AACF,KAXD;AAYAvB,MAAE,mBAAF,EAAuBe,KAAvB,CAA6B,MAA7B;AACH;AAjBwC,CAAzC,wH;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACzDAS,qBAAqB,YAAW;AACxB,YAAIC,kBAAkB;AAACC,yBAAQ,CAAT;AAAW3B,uBAAM,GAAjB;AAAqBI,uBAAM;AAA3B,SAAtB;AAEAtB,gBAAQ8C,UAAR,CAAmB,oBAAnB,EAAyCF,eAAzC;AACA5C,gBAAQ8C,UAAR,CAAmB,wBAAnB,EAA6C,CAA7C;AACA9C,gBAAQ8C,UAAR,CAAmB,2BAAnB,EAAgD,CAAhD;AAEP,CAPD,uH;;;;;;;;;;;ACAA;AACA,IAAG,OAAOpD,IAAP,KAAgB,WAAhB,IAA+B,OAAOqD,IAAP,KAAgB,WAAlD,EAA+D;AAC3D;AACArD,WAAO,IAAIqD,IAAJ,CAASrD,KAAKsD,eAAd,CAAP;AACH,CAHD,MAGO,IAAI,OAAOD,IAAP,KAAgB,WAApB,EAAiC;AACpC;AACArD,WAAO,IAAIqD,IAAJ,CAAS,IAAIA,KAAKE,SAAL,CAAeC,YAAnB,CAAgC,uBAAhC,CAAT,CAAP;AACH,CAHM,MAGA,IAAG,OAAOxD,IAAP,IAAe,WAAlB,EAA+B;AAClC;AACA;AACH,C,CAED;;;AACAP,YAAYgE,IAAZ,CACA;AADA;AAEAR,yH;;;;;;;;;;;ACfAS,OAAOC,SAAP,CAAiB;AAChB;AACAC,iBAAgB;AAFA,CAAjB;AAKAF,OAAOG,KAAP,CAAa,GAAb,EAAkB,YAAU;AAC3B;AACA,MAAKC,QAAL,CAAc,YAAd;AACA,CAHD,E,CAKA;;AACAJ,OAAOG,KAAP,CAAa,YAAb,EAA2B;AAACjE,OAAM;AAAP,CAA3B;AACA8D,OAAOG,KAAP,CAAa,YAAb,EAA2B;AAACjE,OAAM;AAAP,CAA3B,wH;;;;;;;;;;;ACZA,IAAIP,iBAAJ;AAAa0E,OAAOC,KAAP,CAAaC,QAAQ,mBAAR,CAAb,EAA0C;AAAC5E,UAAD,YAAU6E,CAAV,EAAY;AAAC7E,eAAS6E,CAAT;AAAW;AAAxB,CAA1C,EAAoE,CAApE;AAAuE,IAAIC,oBAAJ;AAAgBJ,OAAOC,KAAP,CAAaC,QAAQ,qBAAR,CAAb,EAA4C;AAACE,aAAD,YAAaD,CAAb,EAAe;AAACC,kBAAYD,CAAZ;AAAc;AAA9B,CAA5C,EAA4E,CAA5E;AAA+EH,OAAOC,KAAP,CAAaC,QAAQ,aAAR,CAAb;AAKnL5E,SAAS+E,YAAT,CAAsB7E,OAAtB,CAA8B;AAE5B8E,mBAAiB,UAAUvD,QAAV,EAAoB;AACnC,QAAIwD,eAAeZ,OAAOa,OAAP,EAAnB;;AACA,QAAGD,gBAAgBxD,aAAa4C,OAAOa,OAAP,GAAiBV,KAAjB,CAAuBW,OAAvB,EAAhC,EAAiE;AAC/D,aAAO,QAAP;AACD,KAFD,MAEK;AACH,aAAO,EAAP;AACD;AACF;AAT2B,CAA9B,uH","file":"/app.js","sourcesContent":["Template.accountBalanceComponent.helpers({\n  accounts: function(){\n    return EthAccounts.find({});\n  }\n});\n\nTemplate.accountBalanceItem.helpers({\n  name: function(){\n    return this.name;\n  },\n  address: function(){\n    return this.address;\n  },\n  balance: function(){\n    var balanceEth = web3.fromWei(this.balance, \"ether\");\n    return parseFloat(balanceEth).toFixed(3);\n  }\n});\n","var estimatedFeeInWei =  function(){\n  var gas = Session.get('sendEther.estimatedGas');\n  var gasPrice = new BigNumber(Session.get('sendEther.currentGasPrice'));\n  return gasPrice.mul(gas);\n}\n\nvar estimationCallback = function(e, res){\n    var template = this;\n    console.log('Estimated gas: ', res, e);\n    if(!e && res) {\n        Session.set('sendEther.estimatedGas', res);\n    }\n};\n\nvar getGasPriceCallback = function(e, res){\n    var template = this;\n    console.log('Current Gas Price in Wei: ', res.toString(10), e);\n    if(!e && res) {\n        Session.set('sendEther.currentGasPrice', res.toString(10));\n    }\n};\n\nTemplate.sendEtherComponent.events({\n  'submit form': function(e) {\n    var template = this;\n    e.preventDefault();\n    var fundInfo = {\n      fAddr: $(e.target).find('[name=f-addr]').val(),\n      tAddr: $(e.target).find('[name=t-addr]').val(),\n      amount: web3.toWei($(e.target).find('[name=amount]').val(),'ether')\n    };\n\n    if(EthAccounts.findOne({address: fundInfo.fAddr}, {reactive: false})) {\n      Session.set('sendEther.fundInfo', fundInfo);\n      web3.eth.estimateGas({from: fundInfo.fAddr, to: fundInfo.tAddr, value: fundInfo.amount}, estimationCallback.bind(template));\n      web3.eth.getGasPrice(getGasPriceCallback.bind(template));\n      $('#sendConfirmModal').modal('show');\n    }\n  }\n});\n\nTemplate.sendConfirmModalTemplate.helpers({\n  sendAmountInEther: function(){\n    var amountEth = web3.fromWei(Session.get(\"sendEther.fundInfo\").amount,'ether');\n    return parseFloat(amountEth).toFixed(3);\n  },\n  fAddr: function(){\n    return Session.get(\"sendEther.fundInfo\").fAddr;\n  },\n  tAddr: function(){\n    return Session.get(\"sendEther.fundInfo\").tAddr;\n  },\n  fee: function(){\n    return web3.fromWei(estimatedFeeInWei(),'ether').toString(10);\n  }\n});\n\nTemplate.sendConfirmModalTemplate.events({\n  'click #send': function(e) {\n    e.preventDefault();\n    var fundInfo = Session.get(\"sendEther.fundInfo\");\n    web3.eth.sendTransaction({\n      from: fundInfo.fAddr,\n      to: fundInfo.tAddr,\n      value: fundInfo.amount\n    }, function(error, txHash){\n      console.log(\"Transaction Hash:\", txHash, error);\n      if(!error) {\n        alert(\"Ether Transfer Succeeded\");\n      } else {\n        alert(\"Ether Transfer Failed\");\n      }\n    });\n    $('#sendConfirmModal').modal('hide');\n}});\n","defaultSessionVars = function() {\n        var initialFundInfo = {ammount:0,fAddr:0x0,tAddr:0x0};\n\n        Session.setDefault(\"sendEther.fundInfo\", initialFundInfo);\n        Session.setDefault(\"sendEther.estimatedGas\", 0);\n        Session.setDefault(\"sendEther.currentGasPrice\", 0);\n\n};\n","// Checks Web3 support\nif(typeof web3 !== 'undefined' && typeof Web3 !== 'undefined') {\n    // If there's a web3 library loaded, then make your own web3\n    web3 = new Web3(web3.currentProvider);\n} else if (typeof Web3 !== 'undefined') {\n    // If there isn't then set a provider\n    web3 = new Web3(new Web3.providers.HttpProvider(\"http://localhost:8545\"));\n} else if(typeof web3 == 'undefined') {\n    // Alert the user he is not in a web3 compatible browser\n    return;\n}\n\n//initialize the account\nEthAccounts.init()\n//initialize the session with default value\ndefaultSessionVars();\n","Router.configure({\n\t// LayoutTemplate\n\tlayoutTemplate: 'walletLayout',\n});\n\nRouter.route('/', function(){\n\t//set redirect assosiated with '/'\n\tthis.redirect('/dashboard');\n});\n\n// Set mapping between URL and Route template.\nRouter.route('/dashboard', {name: 'dashboard'});\nRouter.route('/sendEther', {name: 'sendEther'});\n","import { Template } from 'meteor/templating';\nimport { ReactiveVar } from 'meteor/reactive-var';\n\nimport './main.html';\n\nTemplate.walletLayout.helpers({\n\n  activeIfCurrent: function (template) {\n    var currentRoute = Router.current();\n    if(currentRoute && template === Router.current().route.getName()){\n      return 'active';\n    }else{\n      return '';\n    }\n  }\n});\n"]}